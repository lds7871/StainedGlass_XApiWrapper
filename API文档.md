# ğŸš€ X/Twitter è‡ªåŠ¨åŒ–ç³»ç»Ÿ API æ–‡æ¡£


### é…ç½®æ–‡ä»¶è®¾ç½®

ç¼–è¾‘ `src/main/resources/config.properties`:

```properties
# é»˜è®¤ç”¨æˆ· IDï¼ˆç”¨äºæ— å‚æ•°è°ƒç”¨ï¼‰
DefaultUID=1640253924744765440

# ç½‘ç»œä»£ç†è®¾ç½®
proxy.is.open=true
proxy.host=127.0.0.1
proxy.port=33210

# åª’ä½“è·¯å¾„
#ç”¨äº /api/x/media/upload-local æ¥å£éšæœºä¸Šä¼ pngå›¾ç‰‡
saveimgdir=C:\\Users\\Administrator\\Desktop\\XMediaSaveImg
# åª’ä½“æŸ¥è¯¢é™åˆ¶æ•°é‡
mediagetlimit=20
```

### Token æœ‰æ•ˆæœŸ

- **è®¿é—® Token æœ‰æ•ˆæœŸ**: 2 å°æ—¶
- **åˆ·æ–°è§¦å‘é˜ˆå€¼**: 30 åˆ†é’Ÿï¼ˆå‰©ä½™æ—¶é—´ < 30 åˆ†é’Ÿæ—¶è‡ªåŠ¨åˆ·æ–°ï¼‰
- **è‡ªåŠ¨åˆ·æ–°**: âœ… ç³»ç»Ÿåå°è‡ªåŠ¨ç»´æŠ¤ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

---

## è®¤è¯ä¸å‚æ•°è¯´æ˜ï¼ˆé‡è¦ï¼‰

### ğŸ‘¤ ç”¨æˆ·èº«ä»½ç¡®å®š

æœ¬ API ç³»ç»Ÿé‡‡ç”¨**å›ºå®š UID + æ•°æ®åº“ Token** çš„è®¤è¯æ–¹æ¡ˆï¼š

| æ¥å£ | ç”¨æˆ·èº«ä»½æ¥æº | Token æ¥æº | æ˜¯å¦å¯è‡ªå®šä¹‰ |
|-----|-----------|----------|-----------|
| `/api/twitter/tweet/create` | `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢ | âŒ ä¸å¯ï¼Œå§‹ç»ˆä½¿ç”¨ DefaultUID |
| `/api/twitter/tweet/createformedia` | `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢ | âŒ ä¸å¯ï¼Œå§‹ç»ˆä½¿ç”¨ DefaultUID |
| `/api/twitter/tweet/get/latest` | å‚æ•° `userId` æˆ– `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢è¯¥ç”¨æˆ·æœ€æ–° Token | âœ… å¯ï¼Œé€šè¿‡ Query å‚æ•°è¦†ç›– |
| `/api/twitter/tweet/repost/create` | `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢ | âŒ ä¸å¯ï¼Œå§‹ç»ˆä½¿ç”¨ DefaultUID |
| `/api/x/media/upload-local` | `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢ | âŒ ä¸å¯ï¼Œå§‹ç»ˆä½¿ç”¨ DefaultUID |
| `/api/x/media/upload-file` | `config.properties` çš„ `DefaultUID` | æ•°æ®åº“æŸ¥è¯¢ | âŒ ä¸å¯ï¼Œå§‹ç»ˆä½¿ç”¨ DefaultUID |

### ğŸ“‹ å‚æ•°è®¾ç½®æŒ‡å—

#### ğŸŸ¢ **å¿…éœ€å‚æ•°** (åœ¨è¯·æ±‚ä½“æˆ– Query ä¸­æä¾›)

å¿…éœ€å‚æ•°éœ€è¦åœ¨è¯·æ±‚æ—¶æ˜ç¡®æä¾›ï¼Œæ— é»˜è®¤å€¼ï¼Œç¼ºå°‘ä¼šå¯¼è‡´ 400 é”™è¯¯ï¼š

| æ¥å£ | å‚æ•° | ç±»å‹ | è¯´æ˜ |
|-----|------|------|------|
| `/api/twitter/tweet/create` | `text` | String | æ¨æ–‡å†…å®¹ï¼ˆ280 å­—ç¬¦ä»¥å†…ï¼‰ |
| `/api/twitter/tweet/createformedia` | `text` | String | æ¨æ–‡å†…å®¹ |
| `/api/twitter/tweet/repost/create` | `tweetId` | String | è¦è½¬å‘çš„æ¨æ–‡ ID |
| `/api/x/media/upload-file` | `filePath` | String | æ–‡ä»¶è·¯å¾„æˆ– URL |

#### ğŸŸ¡ **å¯é€‰å‚æ•°** (æœ‰é»˜è®¤å€¼ï¼Œå¯çœç•¥)

å¯é€‰å‚æ•°æœ‰åˆç†çš„é»˜è®¤å€¼ï¼Œè‹¥ä¸æä¾›ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼š

| æ¥å£ | å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|------|--------|------|
| `/api/twitter/tweet/create` | `mediaIds` | `[]` (ç©ºæ•°ç»„) | é™„åŠ åª’ä½“ IDï¼ˆå¯é€‰ï¼‰ |
| `/api/twitter/tweet/create` | `replySettings` | `everyone` | å›å¤æƒé™è®¾ç½® |
| `/api/twitter/tweet/get/latest` | `userId` | `config.properties` çš„ `DefaultUID` | ç›®æ ‡ç”¨æˆ· ID |
| `/api/x/media/upload-local` | `mediaCategory` | `tweet_image` | åª’ä½“ç±»åˆ« |
| `/api/x/media/upload-local` | `mediaType` | `image/png` | åª’ä½“ç±»å‹ |
| `/api/x/media/upload-file` | `mediaCategory` | `tweet_image` | åª’ä½“ç±»åˆ« |
| `/api/x/media/upload-file` | `mediaType` | `image/png` | åª’ä½“ç±»å‹ |

#### ğŸ”´ **ä¸å†æ”¯æŒçš„å‚æ•°**

ä»¥ä¸‹å‚æ•°åœ¨æœ¬ç³»ç»Ÿä¸­**ä¸å†æ”¯æŒ**ï¼Œä»»ä½•åŒ…å«è¿™äº›å‚æ•°çš„è¯·æ±‚ä¼šè¢«å¿½ç•¥ï¼š

- âŒ Header: `X-Twitter-User-Id`ï¼ˆç”¨æˆ·èº«ä»½å·²å›ºå®šä¸º DefaultUIDï¼‰
- âŒ Query: `userId`ï¼ˆé™¤äº† `/api/twitter/tweet/get/latest` å¯ä»¥è¦†ç›–ï¼‰
- âŒ Session: `twitterUserId`ï¼ˆå·²æ”¹ä¸ºæ•°æ®åº“æŸ¥è¯¢ï¼‰

---

## API ç«¯ç‚¹è¯¦ç»†æ–‡æ¡£

### 1. æ¨æ–‡ç›¸å…³æ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/twitter/tweet`

---

##### ğŸ”¹ åˆ›å»ºæ¨æ–‡

```
æœåŠ¡å™¨
POST /api/twitter/tweet/create
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/tweets
```

**åŠŸèƒ½**: åˆ›å»ºä¸€æ¡æ–°æ¨æ–‡


**è®¤è¯è¯´æ˜**: æ¥å£å®ç°ä» `config.properties` ä¸­è¯»å– `DefaultUID`ï¼Œå¹¶ä½¿ç”¨æ•°æ®åº“ä¸­è¯¥ç”¨æˆ·çš„ access_token å‘èµ·è¯·æ±‚ã€‚è¯¥æ¥å£ä¸é€šè¿‡ Header/Query/Session æŒ‡å®šå…¶ä»– userIdï¼›è¦æ›´æ”¹å‘å¸ƒè´¦æˆ·ï¼Œè¯·ä¿®æ”¹é…ç½®æˆ–åœ¨åç«¯æ›´æ–° Tokenã€‚

**è¯·æ±‚ä½“** (JSON):

```json
{
  "text": "Hello Twitter! è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¨æ–‡ #æµ‹è¯•",
}
```


| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|-----|------|------|------|
| `text` | String | âœ… | æ¨æ–‡å†…å®¹ï¼ˆæœ€å¤š 280 ä¸ªå­—ç¬¦ï¼‰|
| `mediaIds` | Array | âŒ | åª’ä½“ ID åˆ—è¡¨ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰ï¼Œé€šå¸¸æ¥è‡ª `/api/x/media` ä¸Šä¼ è¿”å›çš„ media_id |
| `replySettings` | String | âŒ | å›å¤è®¾ç½®ï¼ˆeveryone/mentionedUsers/followingï¼‰|

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "âœ… æ¨æ–‡åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": "1234567890123456789",
    "text": "Hello Twitter! è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¨æ–‡ #æµ‹è¯•",
    "created_at": "2025-11-12T10:30:00Z"
  },
  "timestamp": 1694520600000
}

```

---


##### ğŸ”¹ åˆ›å»ºå¸¦åª’ä½“çš„æ¨æ–‡

```
æœåŠ¡å™¨
POST /api/twitter/tweet/createformedia
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/tweets
```
**å‰è¨€**: å¦‚ä½•ä¸Šä¼ è§ä¹‹åçš„åª’ä½“æ¥å£ã€‚

**åŠŸèƒ½**: ä½¿ç”¨åª’ä½“åº“ä¸­å·²ä¸Šä¼ ä¸”æœªä½¿ç”¨çš„åª’ä½“åˆ›å»ºæ¨æ–‡ã€‚æ¥å£ä¼šè‡ªåŠ¨ä» `media_library` è¡¨ä¸­ç­›é€‰ `status=0` ä¸” `endTime > å½“å‰æ—¶é—´` çš„åª’ä½“ï¼Œæ„å»º `media_ids` å¹¶å‘å¸ƒæ¨æ–‡ã€‚

**è®¤è¯è¯´æ˜**: åŒ `/create`ï¼Œä½¿ç”¨ `config.properties` ä¸­ `DefaultUID` å¯¹åº”çš„æ•°æ®åº“ Token è¿›è¡Œè®¤è¯ã€‚

**è¯·æ±‚ä½“** (JSON):

```json
{
  "text": "å¸¦åª’ä½“çš„æ¨æ–‡æ–‡æœ¬"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|-----|------|------|------|
| `text` | String | âœ… | æ¨æ–‡å†…å®¹ |

**è¡Œä¸º**:
- æ¥å£ä¼šæŸ¥è¯¢åª’ä½“åº“ï¼Œè‹¥æ²¡æœ‰å¯ç”¨åª’ä½“ï¼ˆæ»¡è¶³ `status=0` ä¸” `endTime` åœ¨æœªæ¥ï¼‰ï¼Œè¿”å› 400 å¹¶æç¤ºç”¨æˆ·å…ˆä¸Šä¼ åª’ä½“ã€‚
- è‹¥å­˜åœ¨å¯ç”¨åª’ä½“ï¼Œä¼šå°†è¿™äº›åª’ä½“çš„ `media_id` åŠ å…¥æ¨æ–‡è¯·æ±‚å¹¶è°ƒç”¨ Twitter API åˆ›å»ºæ¨æ–‡ã€‚
- åˆ›å»ºæˆåŠŸåï¼Œä¼šæŠŠä½¿ç”¨è¿‡çš„åª’ä½“è®°å½• `status` æ›´æ–°ä¸º `1`ï¼ˆå·²ä½¿ç”¨ï¼‰ã€‚

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "æ¨æ–‡åˆ›å»ºæˆåŠŸ",
  "data": { /* CreateTweetResponse å¯¹è±¡ */ },
  "used_media_count": 2,
  "used_media_ids": ["3_123...", "3_456..."]
}
```

**å“åº”å¤±è´¥ç¤ºä¾‹** (400):

```json
{
  "code": 400,
  "message": "æ²¡æœ‰å¯ç”¨çš„åª’ä½“ï¼Œè¯·å…ˆä¸Šä¼ åª’ä½“"
}
```


### 2. æ¨æ–‡è·å–æ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/twitter/tweet/get`

---

##### ğŸ”¹ è·å–æœ€è¿‘æ¨æ–‡åˆ—è¡¨ï¼ˆå¤šæ¡ï¼‰

```
æœåŠ¡å™¨
GET /api/twitter/tweet/get/latest
ä¼ è‡³ç½‘ç»œ
GET /api.x.com/2/users/{id}/tweets
```

**åŠŸèƒ½**: è·å–æŒ‡å®šç”¨æˆ·æœ€è¿‘å‘å¸ƒçš„ 5 æ¡æ¨æ–‡

**å…³é”®ç‰¹æ€§**:
- ä½¿ç”¨æ•°æ®åº“æœ€æ–°çš„ Token ä½œä¸ºè®¤è¯ï¼ˆæ¥å£ä¼šä»æ•°æ®åº“ä¸­è¯»å–æœ€æ–°çš„æœ‰æ•ˆ Token å¹¶ç”¨äºè°ƒç”¨ Twitter APIï¼›ä¸ä¼šä½¿ç”¨ Header/Session ä¸­çš„ access tokenï¼‰
- æ”¯æŒé€šè¿‡ Query å‚æ•° `userId` æŒ‡å®šç›®æ ‡ç”¨æˆ·ï¼ˆè‹¥ä¸æä¾›åˆ™ä» `config.properties` çš„ `DefaultUID` è¯»å–ï¼‰
- è‹¥é…ç½®ä¸å­˜åœ¨ï¼Œä½¿ç”¨ `000000000` ä½œä¸ºé»˜è®¤å€¼
- è¿”å›æœ€è¿‘ 5 æ¡æ¨æ–‡æ•°ç»„

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ | é»˜è®¤å€¼ |
|-----|------|------|------|--------|
| `userId` | String | âŒ | ç”¨æˆ· IDï¼ˆå¯é€‰ï¼Œä¼˜å…ˆä½¿ç”¨æ­¤å€¼è¦†ç›– DefaultUIDï¼‰ | ä» `config.properties` è¯»å–ï¼ˆè‹¥æœªæä¾›åˆ™ä½¿ç”¨ DefaultUIDï¼Œç¼ºçœä¸º `000000000`ï¼‰ |

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "æˆåŠŸè·å–æ¨æ–‡",
  "data": {
    "tweets": [
      {
        "id": "1234567890123456789",
        "text": "Latest tweet content here",
        "created_at": "2025-11-12T10:30:00Z",
        "author_id": "1640253924744765440",
        "like_count": 42,
        "retweet_count": 15,
        "reply_count": 8
      },
      {
        "id": "1234567890123456788",
        "text": "Second latest tweet",
        "created_at": "2025-11-11T15:20:00Z",
        "author_id": "1640253924744765440",
        "like_count": 28,
        "retweet_count": 10,
        "reply_count": 5
      }
    ],
    "tweet_count": 5,
    "result_count": 5
  },
  "timestamp": 1694520600000
}
```

**å“åº”æ•°æ®è¯´æ˜**:

| å­—æ®µ | è¯´æ˜ |
|-----|------|
| `tweets` | æ¨æ–‡æ•°ç»„ï¼Œæœ€å¤š 5 æ¡ |
| `tweet_count` | å®é™…è¿”å›çš„æ¨æ–‡æ•°é‡ |
| `result_count` | Twitter API è¿”å›çš„æ€»æ•° |
| æ¯æ¡æ¨æ–‡åŒ…å« | `id`, `text`, `created_at`, `author_id`, `like_count`, `retweet_count`, `reply_count` |

**ç‰¹æ®Šæƒ…å†µ**ï¼š

å½“ç”¨æˆ·æ²¡æœ‰æ¨æ–‡æ—¶ï¼š
```json
{
  "code": 200,
  "message": "æˆåŠŸè·å–æ¨æ–‡",
  "data": {
    "message": "è¯¥ç”¨æˆ·æ²¡æœ‰æ¨æ–‡",
    "tweets": []
  },
  "timestamp": 1694520600000
}
```

---

### 3. ç‚¹èµæ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/twitter/tweet/like`

---

##### ğŸ”¹ ç‚¹èµæ¨æ–‡

```
æœåŠ¡å™¨
POST /api/twitter/tweet/like/create
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/users/{id}/likes
```

**åŠŸèƒ½**: ç‚¹èµï¼ˆæ”¶è—ï¼‰ä¸€æ¡æ¨æ–‡åˆ°ç”¨æˆ·è´¦æˆ·


**è®¤è¯æ–¹å¼**: ä½¿ç”¨ `config.properties` ä¸­çš„ `DefaultUID` å¹¶ä»æ•°æ®åº“è¯»å–è¯¥ç”¨æˆ·çš„ Tokenï¼›æ¥å£å®ç°**ä»…**ä½¿ç”¨æ•°æ®åº“ä¸­çš„ Token å‘èµ·ç‚¹èµè¯·æ±‚ï¼Œä¸æ”¯æŒé€šè¿‡è¯·æ±‚ä½“/Header/Query æŒ‡å®šå‘èµ·è´¦æˆ·ã€‚

**è¯·æ±‚ä½“** (JSON):

```json
{
  "tweetId": "1234567890123456789"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|-----|------|------|------|
| `tweetId` | String | âœ… | è¦ç‚¹èµçš„æ¨æ–‡ ID |

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "liked": true
  },
  "timestamp": 1694520600000
}
```

---

### 4. è½¬å‘æ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/twitter/tweet/repost`

---

##### ğŸ”¹ è½¬å‘æ¨æ–‡

```
æœåŠ¡å™¨
POST /api/twitter/tweet/repost/create
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/users/{id}/retweets
```

**åŠŸèƒ½**: è½¬å‘ï¼ˆè½¬æ¨ï¼‰ä¸€æ¡æ¨æ–‡åˆ°ç”¨æˆ·è´¦æˆ·


**è®¤è¯æ–¹å¼**: ä½¿ç”¨ `config.properties` ä¸­çš„ `DefaultUID` å¹¶ä»æ•°æ®åº“è¯»å–è¯¥ç”¨æˆ·çš„ Tokenï¼›æ¥å£å®ç°**ä»…**ä½¿ç”¨æ•°æ®åº“ä¸­çš„ Token å‘èµ·è½¬å‘è¯·æ±‚ï¼Œä¸æ”¯æŒé€šè¿‡è¯·æ±‚ä½“/Header/Query æŒ‡å®šå‘èµ·è´¦æˆ·ã€‚

**è¯·æ±‚ä½“** (JSON):

```json
{
  "tweetId": "1234567890123456789"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|-----|------|------|------|
| `tweetId` | String | âœ… | è¦è½¬å‘çš„æ¨æ–‡ ID |

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "è½¬å‘æˆåŠŸ",
  "data": {
    "retweeted": true,
    "retweet_id": "9876543210987654321"
  },
  "timestamp": 1694520600000
}
```

**å“åº”å¤±è´¥ç¤ºä¾‹** (400):

```json
{
  "code": 400,
  "message": "tweetId ä¸èƒ½ä¸ºç©º",
  "timestamp": 1694520600000
}
```

---

### 5. åª’ä½“ä¸Šä¼ æ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/x/media`

---

##### ğŸ”¹ ä»é…ç½®ç›®å½•éšæœºä¸Šä¼ åª’ä½“ (/upload-local)

```
æœåŠ¡å™¨
POST /api/x/media/upload-local
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/media/upload
```

**åŠŸèƒ½**: ä» `config.properties` ä¸­é…ç½®çš„ `saveimgdir` ç›®å½•éšæœºæŠ½å–ä¸€å¼  PNG å›¾ç‰‡å¹¶ä¸Šä¼ åˆ° Twitterï¼Œè¿”å› media_idï¼ˆç”¨äºåç»­åˆ›å»ºå¸¦åª’ä½“çš„æ¨æ–‡ï¼‰ã€‚

**è®¤è¯æ–¹å¼**: 
- âœ… **å¿…éœ€**: ä½¿ç”¨ `config.properties` ä¸­çš„ `DefaultUID` ä½œä¸ºç”¨æˆ·èº«ä»½
- ğŸ”‘ Token æ¥æºï¼šä»æ•°æ®åº“ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·çš„ access_token
- âš ï¸ æ— éœ€æ‰‹åŠ¨æä¾›ï¼šä¸å†æ”¯æŒ Header/Query/Session æ–¹å¼

**è¯·æ±‚ä½“** (JSON):

```json
{
  "mediaCategory": "tweet_image",
  "mediaType": "image/png"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ | é»˜è®¤å€¼ |
|-----|------|------|------|--------|
| `mediaCategory` | String | âŒ | åª’ä½“ç±»åˆ« | `tweet_image` |
| `mediaType` | String | âŒ | åª’ä½“ç±»å‹ï¼ˆå½“å‰æ€»æ˜¯ PNGï¼‰| `image/png` |

**è¯´æ˜**:
- `mediaCategory` å’Œ `mediaType` å‡ä¸ºå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼
- è‹¥è¯·æ±‚ä½“ä¸ºç©º (`{}`ï¼‰ï¼Œå°†ä½¿ç”¨å…¨éƒ¨é»˜è®¤å€¼

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "âœ… åª’ä½“ä¸Šä¼ æˆåŠŸ",
  "data": {
    "media_id": "3_1234567890123456789",
    "media_key": "7_1234567890123456789"
  },
  "timestamp": 1694520600000
}
```

**æ–‡ä»¶æ¥æºä¸è¦æ±‚**:

| é¡¹ç›® | è¯´æ˜ |
|-----|------|
| **æ¥æºç›®å½•** | `saveimgdir`ï¼ˆåœ¨ `config.properties` ä¸­é…ç½®ï¼Œä¾‹å¦‚ `C:\\Users\\Administrator\\Desktop\\XMediaSaveImg`ï¼‰ |
| **é€‰æ‹©è§„åˆ™** | éšæœºæŠ½å–ç›®å½•ä¸­åç¼€ä¸º `.png` çš„æ–‡ä»¶ |
| **æœ€å¤§å°ºå¯¸** | 5 MBï¼ˆå— Twitter é™åˆ¶ï¼‰ |

---

##### ğŸ”¹ ä¸Šä¼ æŒ‡å®šè·¯å¾„çš„åª’ä½“ (/upload-file)

```
æœåŠ¡å™¨
POST /api/x/media/upload-file
ä¼ è‡³ç½‘ç»œ
POST /api.x.com/2/media/upload
```

**åŠŸèƒ½**: ä¸Šä¼ æŒ‡å®šè·¯å¾„ï¼ˆæœ¬åœ°ï¼‰æˆ– URL çš„åª’ä½“æ–‡ä»¶åˆ° Twitterï¼Œå¹¶è¿”å›ä¸Šä¼ ç»“æœã€‚

**è®¤è¯æ–¹å¼**: 
- âœ… **å¿…éœ€**: ä½¿ç”¨ `config.properties` ä¸­çš„ `DefaultUID` ä½œä¸ºç”¨æˆ·èº«ä»½
- ğŸ”‘ Token æ¥æºï¼šä»æ•°æ®åº“ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·çš„ access_token
- âš ï¸ æ— éœ€æ‰‹åŠ¨æä¾›ï¼šä¸å†æ”¯æŒ Header/Query/Session æ–¹å¼

**è¯·æ±‚ä½“** (JSON):

```json
{
  "filePath": "C:\\Users\\Administrator\\Desktop\\image.png",
  "mediaCategory": "tweet_image",
  "mediaType": "image/png"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|------|--------|
| `filePath` | String | âœ… | æœ¬åœ°æ–‡ä»¶è·¯å¾„æˆ– URLï¼ˆæ”¯æŒ http/httpsï¼‰ | æ—  |
| `mediaCategory` | String | âŒ | åª’ä½“ç±»åˆ« | `tweet_image` |
| `mediaType` | String | âŒ | åª’ä½“ç±»å‹ | `image/png` |

**æ”¯æŒçš„æ ¼å¼**:

| å­—æ®µ | æ”¯æŒçš„å€¼ |
|-----|---------|
| `mediaCategory` | `tweet_image`, `tweet_gif`, `tweet_video`, `dm_image`, `dm_gif`, `dm_video` |
| `mediaType` | `image/jpeg`, `image/png`, `image/gif`, `image/webp`, `video/mp4` |

**å“åº”æˆåŠŸ** (200):

```json
{
  "code": 200,
  "message": "âœ… åª’ä½“ä¸Šä¼ æˆåŠŸ",
  "data": {
    "media_id": "3_1234567890123456789",
    "media_key": "7_1234567890123456789"
  },
  "timestamp": 1694520600000
}
```

**å¸¸è§é”™è¯¯ç¤ºä¾‹**:

```json
// 400: filePath ä¸èƒ½ä¸ºç©º
{
  "code": 400,
  "message": "filePath ä¸èƒ½ä¸ºç©º",
  "timestamp": 1694520600000
}

// 400: æ–‡ä»¶ä¸å­˜åœ¨
{
  "code": 400,
  "message": "æ–‡ä»¶ä¸å­˜åœ¨: C:\\nonexistent\\file.png",
  "timestamp": 1694520600000
}

// 400: æ— æ•ˆçš„åª’ä½“ç±»å‹
{
  "code": 400,
  "message": "æ— æ•ˆçš„åª’ä½“ç±»å‹: image/bmpã€‚æ”¯æŒçš„ç±»å‹: image/jpeg, image/png, image/gif, image/webp, video/mp4",
  "timestamp": 1694520600000
}
```

---

##### ğŸ”¹ æŸ¥è¯¢åª’ä½“è®°å½•åˆ—è¡¨ (/list)

```
GET /api/x/media/list
```

**åŠŸèƒ½**: æŸ¥è¯¢åª’ä½“åº“ä¸­çš„åª’ä½“è®°å½•ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åºè¿”å›ï¼ˆæœ€å¤šè¿”å› `config.properties` ä¸­ `mediagetlimit` é…ç½®çš„æ¡æ•°ï¼Œé»˜è®¤ 20ï¼‰ã€‚

**è®¤è¯æ–¹å¼**: æ— éœ€è®¤è¯ï¼ˆå…¬å¼€æ¥å£ï¼‰

**å“åº”æˆåŠŸ** (200): è¿”å›åª’ä½“è®°å½•æ•°ç»„ã€æ€»æ•°ä¸è¿”å›æ¡æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯ã€‚

---

### 7. æœåŠ¡ç›‘æ§æ¥å£

#### ğŸ“ **åŸºç¡€ URL**: `/api/serverinfo`

---

##### ğŸ”¹ è·å– JVM å®Œæ•´ä¿¡æ¯

```
GET /api/serverinfo/JVMoverview
```

**åŠŸèƒ½**: è·å– JVM å’Œç³»ç»Ÿçš„**è¯¦ç»†ç›‘æ§æ•°æ®**

**åŒ…å«ä¿¡æ¯**:
- å †å†…å­˜ / éå †å†…å­˜ä½¿ç”¨æƒ…å†µ
- CPU å’Œçº¿ç¨‹ä¿¡æ¯
- JVM ç‰ˆæœ¬å’Œé…ç½®
- ç³»ç»Ÿè´Ÿè½½å¹³å‡å€¼

**å“åº”æˆåŠŸ** (200):

```json
{
  "çŠ¶æ€ç ": 200,
  "æ¶ˆæ¯": "âœ… æ¦‚è§ˆä¿¡æ¯è·å–æˆåŠŸ",
  "æ•°æ®": {
    "å†…å­˜æ¦‚è§ˆ": {
      "å †å·²ä½¿ç”¨_MB": 512,
      "å †æœ€å¤§_MB": 1024,
      "å †ä½¿ç”¨ç‡": "50.00%"
    },
    "CPUæ¦‚è§ˆ": {
      "å¯ç”¨å¤„ç†å™¨æ•°": 8,
      "ç³»ç»Ÿè´Ÿè½½å¹³å‡å€¼": 2.5
    },
    "çº¿ç¨‹æ¦‚è§ˆ": {
      "å½“å‰çº¿ç¨‹æ•°": 45,
      "å³°å€¼çº¿ç¨‹æ•°": 48
    },
    "JVMä¿¡æ¯": {
      "Javaç‰ˆæœ¬": "21.0.1",
      "JVMåç§°": "OpenJDK 64-Bit Server VM"
    }
  },
  "æ—¶é—´æˆ³": 1694520600000
}
```

**é€‚ç”¨åœºæ™¯**: å®Œæ•´çš„æœåŠ¡å¥åº·æ£€æŸ¥

---

##### ğŸ”¹ è·å–å¯åŠ¨ä¿¡æ¯ä¸å†…å­˜ï¼ˆè½»é‡ç‰ˆï¼‰

```
GET /api/serverinfo/startup
```

**åŠŸèƒ½**: è·å–**åº”ç”¨å¯åŠ¨æ—¶é—´**å’Œ**å†…å­˜ä½¿ç”¨æƒ…å†µ**ï¼ˆè½»é‡çº§æ¥å£ï¼‰

**å…³é”®ä¿¡æ¯**:
- åº”ç”¨å¯åŠ¨æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰
- è¿è¡Œæ—¶é•¿ï¼ˆç§’ï¼‰
- å †å†…å­˜ / éå †å†…å­˜è¯¦ç»†ä¿¡æ¯
- è¿è¡Œæ—¶å†…å­˜ç»Ÿè®¡

**å“åº”æˆåŠŸ** (200):

```json
{
  "çŠ¶æ€ç ": 200,
  "æ¶ˆæ¯": "æœåŠ¡å¯åŠ¨æ—¶é—´ä¸å†…å­˜ä¿¡æ¯ï¼ˆå·²æœ¬åœ°åŒ–ï¼‰",
  "æ•°æ®": {
    "å¯åŠ¨æ—¶é—´": "2025-11-12T09:00:00Z",
    "è¿è¡Œæ—¶é•¿(ç§’)": 3600,
    "å †å†…å­˜": {
      "å †_å·²ç”¨_MB": 256,
      "å †_å·²æäº¤_MB": 512,
      "å †_æœ€å¤§_MB": 1024
    },
    "éå †å†…å­˜": {
      "éå †_å·²ç”¨_MB": 128,
      "éå †_å·²æäº¤_MB": 256
    },
    "è¿è¡Œæ—¶ä¿¡æ¯": {
      "JVMæ€»å†…å­˜_MB": 512,
      "JVMç©ºé—²å†…å­˜_MB": 256,
      "JVMå·²ç”¨å†…å­˜_MB": 256
    }
  },
  "æ—¶é—´æˆ³": 1694520600000
}
```

**æ€§èƒ½ä¼˜åŠ¿**:
- æ›´è½»é‡ï¼ˆæ•°æ®é‡å°ï¼‰
- æ›´å¿«é€Ÿï¼ˆå­—æ®µæ•°å°‘ï¼‰
- æ¨èç”¨äºé¢‘ç¹ç›‘æ§

---

## é”™è¯¯å¤„ç†

### æ ‡å‡†é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰ API é”™è¯¯éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "code": 401,
  "message": "æœªæˆæƒï¼šæ— æ³•ä»ä»»ä½•æ¥æºè·å–ç”¨æˆ·èº«ä»½",
  "timestamp": 1694520600000,
  "data": null
}
```

### é”™è¯¯ä»£ç æ±‡æ€»

| HTTP çŠ¶æ€ | ä»£ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|---------|------|------|---------|
| **200** | 200 | âœ… è¯·æ±‚æˆåŠŸ | æ— éœ€å¤„ç† |
| **400** | 400 | âŒ è¯·æ±‚æ ¼å¼é”™è¯¯ | æ£€æŸ¥è¯·æ±‚ä½“å’Œå‚æ•° |
| **401** | 401 | âŒ æœªæˆæƒ | ç¡®ä¿ Token æœ‰æ•ˆæˆ–å·²ç™»å½• |
| **429** | 429 | âš ï¸ API é™æµ | ç­‰å¾…åé‡è¯•ï¼ˆé€šå¸¸ 15 åˆ†é’Ÿï¼‰ |
| **500** | 500 | âŒ æœåŠ¡å™¨é”™è¯¯ | æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼Œè”ç³»ç®¡ç†å‘˜ |

---



### å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | æ’æŸ¥æ­¥éª¤ |
|-----|---------|
| æœåŠ¡æ— å“åº” | 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨ (Aå¯åŠ¨.cmd)<br>2. æ£€æŸ¥ç«¯å£ 8090 æ˜¯å¦å ç”¨<br>3. æ£€æŸ¥é˜²ç«å¢™é…ç½® |
| Token æ— æ•ˆ | 1. é‡æ–°æˆæƒ OAuth<br>2. æ£€æŸ¥æ•°æ®åº“ twitter_token è¡¨<br>3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—ç¡®è®¤ Token åˆ·æ–°çŠ¶æ€ |
| API é™æµ | 1. æ£€æŸ¥è¯·æ±‚é¢‘ç‡<br>2. ç­‰å¾… 15 åˆ†é’Ÿé‡è¯•<br>3. åˆ†æ•£è¯·æ±‚æ—¶é—´é—´éš” |
| åª’ä½“ä¸Šä¼ å¤±è´¥ | 1. ç¡®ä¿ tempimg.png å­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•<br>2. æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼ˆå¿…é¡» PNGï¼‰<br>3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ |

| åª’ä½“ä¸Šä¼ å¤±è´¥ | 1. ç¡®ä¿ `config.properties` ä¸­çš„ `saveimgdir` é…ç½®æ­£ç¡®ä¸”ç›®å½•å­˜åœ¨ä¸”åŒ…å« PNG å›¾ç‰‡ï¼›æˆ–è€…ä½¿ç”¨ `/api/x/media/upload-file` ä¸Šä¼ æŒ‡å®šæ–‡ä»¶æˆ– URLã€‚<br>2. æ£€æŸ¥æ–‡ä»¶/åª’ä½“ç±»å‹ï¼ˆæ”¯æŒ image/png, image/jpeg, image/gif, image/webp, video/mp4ï¼‰ã€‚<br>3. æ£€æŸ¥ `config.properties` ä¸­çš„ `DefaultUID` é…ç½®ï¼Œç¡®ä¿è¯¥ç”¨æˆ·çš„ Token å·²å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚<br>4. æŸ¥çœ‹æœåŠ¡æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ |

---



